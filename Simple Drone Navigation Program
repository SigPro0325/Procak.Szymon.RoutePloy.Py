import time

GRID_SIZE = 12


def read_route_file(filename):
    with open(filename) as f:
        lines = f.readlines()
    num_instructions = int(lines[0])
    instructions = [line.strip() for line in lines[1:]]
    return num_instructions, instructions


def follow_instructions(num_instructions, instructions):
    x, y = 6, 6
    coords = [(x, y)]

    for i in range(num_instructions):
        direction = instructions[i]
        if direction == 'N':
            y += 1
        elif direction == 'S':
            y -= 1
        elif direction == 'E':
            x += 1
        elif direction == 'W':
            x -= 1
        coords.append((x, y))

    return coords


print('Initializing Route Plotting Program...')
time.sleep(5)

filename = input("Enter Route File Name: ")
num_instructions, instructions = read_route_file(filename)
coords = follow_instructions(num_instructions, instructions)

print("Starting Route Plotting.............")

for x, y in coords:
    print(f"Moving to ({x}, {y})")

print("Route Plotting Complete.")
print("Shutting down Route Plotting Program....")
time.sleep(5)

while True:
    filename = input("Enter the route instruction filename (or 'STOP' to exit): ")
    if filename == 'STOP':
        print('Shutting down Route Plotting Program...')
        time.sleep(5)
        break

    try:
        num_instructions, instructions = read_route_file(filename)
        coords = follow_instructions(num_instructions, instructions)
    except Exception as e:
        print(e)
        continue

    grid = [[' ' for _ in range(GRID_SIZE)] for _ in range(GRID_SIZE)]

    for x, y in coords:
        if x < 0 or x >= GRID_SIZE or y < 0 or y >= GRID_SIZE:
            print("Error: The route is outside of the grid")
            break
        grid[y][x] = 'X'

    for row in grid:
        print(' '.join(row))

    print('Route plotting complete.')
    print()

    # Display the grid showing the movement
    for row in grid:
        print('|' + '|'.join(row) + '|')
    print('-' * (GRID_SIZE * 2 + 1))

